(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-1132"],{e5Uf:function(t,e,a){"use strict";var i=a("rPlz");a.n(i).a},fJVj:function(t,e,a){t.exports=a.p+"static/img/xuwei.0961cad.jpg"},lAbF:function(t,e,a){"use strict";a.r(e);var i=a("QbLZ"),s=a.n(i),r=a("TsPW"),n=a("ProS"),o=a.n(n),l=(a("75ce"),a("0o9m"),a("Ynxi"),a("AH3D"),o.a);a("OyzN"),a("EJiy");var c={mixins:[{mounted:function(){var t=this;this.__resizeHanlder=function(t,e,a){var i=void 0,s=void 0,r=void 0,n=void 0,o=void 0,l=function l(){var c=+new Date-n;c<e&&c>0?i=setTimeout(l,e-c):(i=null,a||(o=t.apply(r,s),i||(r=s=null)))};return function(){for(var s=arguments.length,c=Array(s),u=0;u<s;u++)c[u]=arguments[u];r=this,n=+new Date;var d=a&&!i;return i||(i=setTimeout(l,e)),d&&(o=t.apply(r,c),r=c=null),o}}(function(){t.chart&&t.chart.resize()},100),window.addEventListener("resize",this.__resizeHanlder)},beforeDestroy:function(){window.removeEventListener("resize",this.__resizeHanlder)}}],props:{className:{type:String,default:"chart"},id:{type:String,default:"chart"},width:{type:String,default:"200px"},height:{type:String,default:"200px"},charts_data:{type:Object,default:{}}},data:function(){return{chart:null,legend:[]}},mounted:function(){this.initChart(),this.__resizeHanlder()},beforeDestroy:function(){this.chart&&(this.chart.dispose(),this.chart=null)},methods:{initChart:function(){var t=this;this.chart=l.init(document.getElementById(this.id));var e={backgroundColor:"#f9f9f9",tooltip:{trigger:"axis",axisPointer:{type:"cross",label:{backgroundColor:"#6a7985"}}},legend:{top:20,icon:"rect",itemWidth:14,itemHeight:5,itemGap:13,data:this.legend},grid:{top:100,left:"2%",right:"4%",bottom:"2%",containLabel:!0},xAxis:[{type:"category",boundaryGap:!1,data:this.charts_data.x_axis}],yAxis:[{type:"value",name:"价格",axisTick:{show:!1},axisLine:{lineStyle:{color:"#57617B"}},axisLabel:{margin:10,textStyle:{fontSize:14}},splitLine:{lineStyle:{color:"#57617B"}}}],series:[]};this.charts_data.series.map(function(e,a){e.type="line",e.stack="总量"+a,t.legend.push(e.name)}),e.series=this.charts_data.series,this.chart.setOption(e)}}},u=a("KHd+"),d=Object(u.a)(c,function(){var t=this.$createElement;return(this._self._c||t)("div",{class:this.className,style:{height:this.height,width:this.width},attrs:{id:this.id}})},[],!1,null,null,null);d.options.__file="lineMarker.vue";var h=d.exports,m=a("L2JU"),_={name:"Dashboard",components:{Chart:h},data:function(){return{customer_id:sessionStorage.getItem("customer_id"),show:!0,dialogFormVisible:!1,dialogFormVisible1:!1,talkPriceData:{price:"",count:"",shop_id:"",customer_id:""},buyData:{customer_id:"",goods_id:"",goods_name:"",price:"",total_price:0,total_num:"",reciving_address:"",logistics_mode:0,remark:""},activeNames:1,tabChartsData:[],shopListData:[],tempShopData:[],newsListData:[],rules:{price:[{required:!0,message:"请输入意向价格",trigger:"blur"},{pattern:/([1-9]\d*(\.\d*[1-9])?)|(0\.\d*[1-9])/,message:"只能输入大于0的数字",trigger:"blur"}],count:[{required:!0,message:"请输入数量",trigger:"change"},{pattern:/([1-9]\d*(\.\d*[1-9])?)|(0\.\d*[1-9])/,message:"只能输入大于0的数字",trigger:"blur"}],total_num:[{required:!0,message:"请输入数量",trigger:"change"},{pattern:/([1-9]\d*(\.\d*[1-9])?)|(0\.\d*[1-9])/,message:"只能输入大于0的数字",trigger:"blur"}],reciving_address:[{required:!0,message:"请输入地址",trigger:"change"}]}}},computed:s()({},Object(m.b)(["info"])),created:function(){this.getTabchartsList(),this.getShopListData(),this.getNewsListData()},methods:{getTabchartsList:function(){var t=this;Object(r.h)().then(function(e){console.log("getTabcharts",e),e.data&&(t.tabChartsData=e.data)})},getShopListData:function(){var t=this;Object(r.g)().then(function(e){console.log("getShopList",e),e.data&&(t.shopListData=e.data,t.tempShopData=e.data.slice(0,4))})},getNewsListData:function(){var t=this;Object(r.e)().then(function(e){console.log("getNewsList",e),e.data&&(t.newsListData=e.data)})},talkPrice:function(t){var e=this;Object(r.i)().then(function(a){"0000"===a.code?(e.dialogFormVisible=!0,e.talkPriceData.customer_id=a.data.customer_id,e.talkPriceData.shop_id=t.shop_id):"0002"===a.code&&(e.$message.error(a.msg),setTimeout(function(){e.pushLogin()},1500))})},commitTalk:function(t){var e=this;this.$refs[t].validate(function(t){if(!t)return!1;Object(r.b)(e.talkPriceData).then(function(t){console.log("bargaining",t),"0000"===t.code?(e.$message({message:t.msg?t.msg:"您的议价请求已发送给工作人员，工作人员将尽快与您联系！",type:"success"}),e.dialogFormVisible=!1):e.$message({message:t.msg?t.msg:"议价失败",type:"error"})}).catch(function(){e.$message.error("议价失败"),e.dialogFormVisible=!1})})},cancelTalk:function(){this.dialogFormVisible=!1,this.restTalkPriceData()},restTalkPriceData:function(){this.talkPriceData={price:"",count:"",shop_id:"",customer_id:""}},buy_goods:function(t){var e=this;Object(r.i)().then(function(a){"0000"===a.code?(e.buyData.customer_id=a.data.customer_id,e.buyData.goods_id=t.shop_id,e.buyData.goods_name=t.shop_name,e.buyData.price=t.price,e.dialogFormVisible1=!0):"0002"===a.code&&(e.$message.error(a.msg),setTimeout(function(){e.pushLogin()},1500))})},cancelBuy:function(){this.dialogFormVisible1=!1,this.restBuyData()},commitBuy:function(t){var e=this;this.$refs[t].validate(function(t){if(!t)return!1;1!=e.buyData.logistics_mode||(console.log("this.buyData.total_num % 32",e.buyData.total_num%32),e.buyData.total_num%32==0)?e.$confirm("该价格为不含运费价格，工作人员会尽快与您联系洽商运费事宜","提示",{confirmButtonText:"继续下单",cancelButtonText:"取消",type:"warning"}).then(function(){Object(r.c)(e.buyData).then(function(t){console.log("buyData",t),"0000"===t.code?(e.$message({message:t.msg?t.msg:"您的采购请求已发送给工作人员，工作人员将尽快与您联系！",type:"success"}),e.dialogFormVisible1=!1):e.$message({message:t.msg?t.msg:"采购失败",type:"error"})}).catch(function(){e.$message.error("采购失败"),e.dialogFormVisible1=!1})}).catch(function(){}):e.$message({message:"寄付只支持32吨/车，请输入32的整数倍采购量",type:"warning"})})},restBuyData:function(){this.buyData={customer_id:"",goods_id:"",goods_name:"",price:"",total_price:0,total_num:"",reciving_address:"",logistics_mode:0,remark:""}},keydown:function(){this.buyData.total_price=Math.floor(this.buyData.total_num*this.buyData.price*100)/100},getMore:function(){this.show=!1,this.tempShopData=this.shopListData},pushMore:function(){this.$router.push("/newsMore/index")},pushDetail:function(t){this.$router.push("/newsDetail/index/"+t)},handleClick:function(t,e){this.$refs["charts"+t.index][0].__resizeHanlder()},handleChange:function(t){},pushLogin:function(){window.open("http://customer.mengtan.com.cn/toLogin?callbackUrl=http://www.mengtan.com.cn","_self")}}},g=(a("e5Uf"),Object(u.a)(_,function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"dashboard-container"},[i("div",{staticStyle:{width:"400px",height:"400px",background:"red",position:"absolute",top:"-400px",left:"0","z-index":"100"}}),t._v(" "),t._m(0),t._v(" "),i("el-tabs",{staticClass:"tabs",attrs:{type:"card"},on:{"tab-click":t.handleClick}},t._l(t.tabChartsData,function(t,e){return i("el-tab-pane",{key:e,attrs:{label:t.title}},[i("div",{staticClass:"chart-container"},[i("chart",{ref:"charts"+e,refInFor:!0,attrs:{id:"wrap"+e,charts_data:t.charts_data,height:"100%",width:"100%"}})],1)])})),t._v(" "),i("div",{staticStyle:{margin:"15px 0"}},[i("el-row",{attrs:{gutter:10}},[i("el-col",{attrs:{xs:24,sm:24,md:12,lg:12,xl:12}},[t.info.AD_data[0]?i("a",{staticClass:"ad_wrap",attrs:{href:t.info.AD_data[0].link,target:"_blank"}},[i("img",{staticStyle:{width:"100%",height:"80px"},attrs:{src:t.info.AD_data[0].img_url,alt:"广告"}})]):i("img",{staticStyle:{width:"100%",height:"80px"},attrs:{src:a("fJVj"),alt:""}})]),t._v(" "),i("el-col",{attrs:{xs:24,sm:24,md:12,lg:12,xl:12}},[t.info.AD_data[1]?i("a",{staticClass:"ad_wrap",attrs:{href:t.info.AD_data[1].link,target:"_blank"}},[i("img",{staticStyle:{width:"100%",height:"80px"},attrs:{src:t.info.AD_data[1].img_url,alt:"广告"}})]):i("img",{staticStyle:{width:"100%",height:"80px"},attrs:{src:a("fJVj"),alt:""}})])],1)],1),t._v(" "),t._m(1),t._v(" "),i("el-collapse",{attrs:{accordion:""},on:{change:t.handleChange},model:{value:t.activeNames,callback:function(e){t.activeNames=e},expression:"activeNames"}},t._l(t.tempShopData,function(e,a){return i("el-collapse-item",{key:"shop_category"+a,attrs:{title:e.shop_category,name:a+1}},t._l(e.data_list,function(e,a){return i("div",{key:"data_list"+a,staticClass:"list"},[i("span",{staticClass:"shop_name"},[t._v(t._s(e.shop_name))]),t._v(" "),i("div",[i("el-button",{attrs:{round:"",type:"primary",size:"mini"},on:{click:function(a){t.talkPrice(e)}}},[t._v("议价")]),t._v(" "),i("el-button",{attrs:{round:"",type:"danger",size:"mini"},on:{click:function(a){t.buy_goods(e)}}},[t._v("立即采购")])],1)])}))})),t._v(" "),t.shopListData.length>4&&t.show?i("div",{staticClass:"more",on:{click:t.getMore}},[t._m(2)]):t._e(),t._v(" "),i("div",{staticStyle:{margin:"15px 0"}},[i("el-row",{attrs:{gutter:10}},[i("el-col",{attrs:{xs:24,sm:24,md:12,lg:12,xl:12}},[t.info.AD_data[2]?i("a",{staticClass:"ad_wrap",attrs:{href:t.info.AD_data[2].link,target:"_blank"}},[i("img",{staticStyle:{width:"100%",height:"80px"},attrs:{src:t.info.AD_data[2].img_url,alt:"广告"}})]):i("img",{staticStyle:{width:"100%",height:"80px"},attrs:{src:a("fJVj"),alt:""}})]),t._v(" "),i("el-col",{attrs:{xs:24,sm:24,md:12,lg:12,xl:12}},[t.info.AD_data[3]?i("a",{staticClass:"ad_wrap",attrs:{href:t.info.AD_data[3].link,target:"_blank"}},[i("img",{staticStyle:{width:"100%",height:"80px"},attrs:{src:t.info.AD_data[3].img_url,alt:"广告"}})]):i("img",{staticStyle:{width:"100%",height:"80px"},attrs:{src:a("fJVj"),alt:""}})])],1)],1),t._v(" "),t._m(3),t._v(" "),i("div",{staticStyle:{"background-color":"#f9f9f9","padding-bottom":"15px"}},[i("el-row",{attrs:{gutter:20}},t._l(t.newsListData,function(e,a){return i("el-col",{key:a,attrs:{xs:24,sm:24,md:12,lg:12,xl:12}},[i("div",{staticClass:"grid-content bg-purple"},[i("div",[i("h4",{staticStyle:{display:"inline-block"}},[t._v("  "+t._s(e.news_category)+" ")]),t._v(" "),i("span",{staticStyle:{float:"right","line-height":"60px",color:"#3a8ee6"},on:{click:t.pushMore}},[t._v("更多>>")])]),t._v(" "),t._l(e.data_list,function(e,a){return i("div",{key:"list"+a,staticClass:"news_wrap",on:{click:function(a){t.pushDetail(e.news_id)}}},[i("span",{staticClass:"newsTitle"},[t._v(t._s(e.news_title.length>20?e.news_title.substring(0,20)+"...":e.news_title))]),t._v(" "),i("span",{staticClass:"newsDate"},[t._v(t._s(e.news_date))])])})],2)])}))],1),t._v(" "),i("el-dialog",{attrs:{visible:t.dialogFormVisible,title:"议价",width:"80%"},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[i("el-form",{ref:"talkPrice",staticClass:"demo-ruleForm",attrs:{model:t.talkPriceData,rules:t.rules,"label-width":"100px"}},[i("el-form-item",{attrs:{label:"意向价格",prop:"price"}},[i("el-input",{model:{value:t.talkPriceData.price,callback:function(e){t.$set(t.talkPriceData,"price",e)},expression:"talkPriceData.price"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"数量",prop:"count"}},[i("el-input",{model:{value:t.talkPriceData.count,callback:function(e){t.$set(t.talkPriceData,"count",e)},expression:"talkPriceData.count"}})],1)],1),t._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:t.cancelTalk}},[t._v("取 消")]),t._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:function(e){t.commitTalk("talkPrice")}}},[t._v("确 定")])],1)],1),t._v(" "),i("el-dialog",{attrs:{visible:t.dialogFormVisible1,title:"立即采购",width:"80%"},on:{"update:visible":function(e){t.dialogFormVisible1=e}}},[i("el-form",{ref:"buy",staticClass:"demo-ruleForm",attrs:{model:t.buyData,rules:t.rules,"label-width":"100px"}},[i("el-form-item",{attrs:{label:"产品名"}},[i("span",[t._v(t._s(t.buyData.goods_name))])]),t._v(" "),i("el-form-item",{attrs:{label:"单价"}},[i("span",[t._v(t._s(t.buyData.price))])]),t._v(" "),i("el-form-item",{attrs:{label:"采购量",prop:"total_num"}},[i("el-input",{on:{change:function(e){t.keydown()}},model:{value:t.buyData.total_num,callback:function(e){t.$set(t.buyData,"total_num",e)},expression:"buyData.total_num"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"总价"}},[i("span",{staticStyle:{"font-size":"18px",color:"red"}},[t._v(t._s(t.buyData.total_price))])]),t._v(" "),i("el-form-item",{attrs:{label:"收货地址",prop:"reciving_address"}},[i("el-input",{model:{value:t.buyData.reciving_address,callback:function(e){t.$set(t.buyData,"reciving_address",e)},expression:"buyData.reciving_address"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"物流方式"}},[i("el-radio-group",{model:{value:t.buyData.logistics_mode,callback:function(e){t.$set(t.buyData,"logistics_mode",e)},expression:"buyData.logistics_mode"}},[i("el-radio",{attrs:{label:0}},[t._v("到付")]),t._v(" "),i("el-radio",{attrs:{label:1}},[t._v("寄付")])],1)],1),t._v(" "),i("el-form-item",{attrs:{label:"备注"}},[i("el-input",{attrs:{rows:2,type:"textarea",placeholder:"请输入内容"},model:{value:t.buyData.remark,callback:function(e){t.$set(t.buyData,"remark",e)},expression:"buyData.remark"}})],1)],1),t._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:t.cancelBuy}},[t._v("取 消")]),t._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:function(e){t.commitBuy("buy")}}},[t._v("确 定")])],1)],1)],1)},[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"menuTitle"},[e("span",{staticClass:"menuTitle_icon"}),this._v(" "),e("span",[this._v("价格趋势")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"menuTitle"},[e("span",{staticClass:"menuTitle_icon"}),this._v(" "),e("span",[this._v("在线采购")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("span",[this._v("更多"),e("i",{staticClass:"el-icon-arrow-down"})])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"menuTitle"},[e("span",{staticClass:"menuTitle_icon"}),this._v(" "),e("span",[this._v("新闻资讯")])])}],!1,null,null,null));g.options.__file="index.vue";e.default=g.exports},rPlz:function(t,e,a){}}]);