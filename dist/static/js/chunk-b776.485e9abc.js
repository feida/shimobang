(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-b776"],{e5Uf:function(t,e,a){"use strict";var i=a("rPlz");a.n(i).a},lAbF:function(t,e,a){"use strict";a.r(e);var i=a("QbLZ"),s=a.n(i),r=a("TsPW"),l=a("MT78"),n=a.n(l);a("OyzN"),a("EJiy");var o={mixins:[{mounted:function(){var t=this;this.__resizeHanlder=function(t,e,a){var i=void 0,s=void 0,r=void 0,l=void 0,n=void 0,o=function o(){var c=+new Date-l;c<e&&c>0?i=setTimeout(o,e-c):(i=null,a||(n=t.apply(r,s),i||(r=s=null)))};return function(){for(var s=arguments.length,c=Array(s),u=0;u<s;u++)c[u]=arguments[u];r=this,l=+new Date;var d=a&&!i;return i||(i=setTimeout(o,e)),d&&(n=t.apply(r,c),r=c=null),n}}(function(){t.chart&&t.chart.resize()},100),window.addEventListener("resize",this.__resizeHanlder)},beforeDestroy:function(){window.removeEventListener("resize",this.__resizeHanlder)}}],props:{className:{type:String,default:"chart"},id:{type:String,default:"chart"},width:{type:String,default:"200px"},height:{type:String,default:"200px"},charts_data:{type:Object,default:{}}},data:function(){return{chart:null,legend:[]}},mounted:function(){this.initChart(),this.__resizeHanlder()},beforeDestroy:function(){this.chart&&(this.chart.dispose(),this.chart=null)},methods:{initChart:function(){var t=this;this.chart=n.a.init(document.getElementById(this.id));var e={backgroundColor:"#f9f9f9",tooltip:{trigger:"axis",axisPointer:{type:"cross",label:{backgroundColor:"#6a7985"}}},legend:{top:20,icon:"rect",itemWidth:14,itemHeight:5,itemGap:13,data:this.legend},grid:{top:100,left:"0%",right:"4%",bottom:"2%",containLabel:!0},xAxis:[{type:"category",boundaryGap:!1,data:this.charts_data.x_axis}],yAxis:[{type:"value",name:"价格",axisTick:{show:!1},axisLine:{lineStyle:{color:"#57617B"}},axisLabel:{margin:10,textStyle:{fontSize:14}},splitLine:{lineStyle:{color:"#57617B"}}}],series:[]};this.charts_data.series.map(function(e,a){e.type="line",e.stack="总量"+a,t.legend.push(e.name)}),e.series=this.charts_data.series,console.log("option",e),this.chart.setOption(e)}}},c=a("KHd+"),u=Object(c.a)(o,function(){var t=this.$createElement;return(this._self._c||t)("div",{class:this.className,style:{height:this.height,width:this.width},attrs:{id:this.id}})},[],!1,null,null,null);u.options.__file="lineMarker.vue";var d=u.exports,h=a("L2JU"),_={name:"Dashboard",components:{Chart:d},data:function(){return{show:!0,dialogFormVisible:!1,dialogFormVisible1:!1,talkPriceData:{price:"",count:"",shop_id:"",customer_id:""},buyData:{customer_id:"",goods_id:"",goods_name:"",price:"",total_price:0,total_num:"",reciving_address:"",logistics_mode:0,remark:""},activeNames:1,tabChartsData:[],shopListData:[],tempShopData:[],newsListData:[],rules:{price:[{required:!0,message:"请输入意向价格",trigger:"blur"},{pattern:/([1-9]\d*(\.\d*[1-9])?)|(0\.\d*[1-9])/,message:"只能输入大于0的数字",trigger:"blur"}],count:[{required:!0,message:"请输入数量",trigger:"change"},{pattern:/([1-9]\d*(\.\d*[1-9])?)|(0\.\d*[1-9])/,message:"只能输入大于0的数字",trigger:"blur"}],total_num:[{required:!0,message:"请输入数量",trigger:"change"},{pattern:/([1-9]\d*(\.\d*[1-9])?)|(0\.\d*[1-9])/,message:"只能输入大于0的数字",trigger:"blur"}],reciving_address:[{required:!0,message:"请输入地址",trigger:"change"}]}}},computed:s()({},Object(h.b)(["info"])),created:function(){this.$store.dispatch("GetInfo"),this.getTabchartsList(),this.getShopListData(),this.getNewsListData()},methods:{getTabchartsList:function(){var t=this;Object(r.f)().then(function(e){console.log("getTabcharts",e),e.data&&(t.tabChartsData=e.data)})},getShopListData:function(){var t=this;Object(r.e)().then(function(e){console.log("getShopList",e),e.data&&(t.shopListData=e.data,t.tempShopData=e.data.slice(0,4))})},getNewsListData:function(){var t=this;Object(r.c)().then(function(e){console.log("getNewsList",e),e.data&&(t.newsListData=e.data)})},talkPrice:function(t){this.dialogFormVisible=!0,this.talkPriceData.customer_id="",this.talkPriceData.shop_id=t.shop_id},commitTalk:function(t){var e=this;this.$refs[t].validate(function(t){if(!t)return!1;e.$message({message:"您的议价请求已发送给工作人员，工作人员将尽快与您联系！",type:"success"}),e.dialogFormVisible=!1})},cancelTalk:function(){this.dialogFormVisible=!1,this.restTalkPriceData()},restTalkPriceData:function(){this.talkPriceData={price:"",count:"",shop_id:"",customer_id:""}},buy_goods:function(t){this.buyData.customer_id="",this.buyData.goods_id=t.shop_id,this.buyData.goods_name=t.shop_name,this.buyData.price=t.price,this.dialogFormVisible1=!0},cancelBuy:function(){this.dialogFormVisible1=!1,this.restBuyData()},commitBuy:function(t){var e=this;this.$refs[t].validate(function(t){if(!t)return!1;e.$message({message:"您的采购请求已发送给工作人员，工作人员将尽快与您联系！",type:"success"}),e.dialogFormVisible1=!1})},restBuyData:function(){this.buyData={customer_id:"",goods_id:"",goods_name:"",price:"",total_price:0,total_num:"",reciving_address:"",logistics_mode:0,remark:""}},keydown:function(){this.buyData.total_price=Math.floor(this.buyData.total_num*this.buyData.price*100)/100},getMore:function(){this.show=!1,this.tempShopData=this.shopListData},pushMore:function(){this.$router.push("/newsMore/index")},pushDetail:function(t){this.$router.push("/newsDetail/index/"+t)},handleClick:function(t,e){this.$refs["charts"+t.index][0].__resizeHanlder()},handleChange:function(t){}}},m=(a("e5Uf"),Object(c.a)(_,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"dashboard-container"},[a("div",{staticStyle:{width:"400px",height:"400px",background:"red",position:"absolute",top:"-400px",left:"0","z-index":"100"}}),t._v(" "),t._m(0),t._v(" "),a("el-tabs",{staticClass:"tabs",attrs:{type:"card"},on:{"tab-click":t.handleClick}},t._l(t.tabChartsData,function(t,e){return a("el-tab-pane",{key:e,attrs:{label:t.title}},[a("div",{staticClass:"chart-container"},[a("chart",{ref:"charts"+e,refInFor:!0,attrs:{id:"wrap"+e,charts_data:t.charts_data,height:"100%",width:"100%"}})],1)])})),t._v(" "),a("div",{staticStyle:{margin:"15px 0"}},[a("el-row",{attrs:{gutter:10}},[a("el-col",{attrs:{xs:24,sm:24,md:12,lg:12,xl:12}},[a("a",{attrs:{href:t.info.AD_data[0].link,target:"_blank"}},[a("img",{staticStyle:{width:"100%",height:"80px"},attrs:{src:t.info.AD_data[0].img_url,alt:""}})])]),t._v(" "),a("el-col",{attrs:{xs:24,sm:24,md:12,lg:12,xl:12}},[a("a",{attrs:{href:t.info.AD_data[1].link,target:"_blank"}},[a("img",{staticStyle:{width:"100%",height:"80px"},attrs:{src:t.info.AD_data[1].img_url,alt:""}})])])],1)],1),t._v(" "),t._m(1),t._v(" "),a("el-collapse",{attrs:{accordion:""},on:{change:t.handleChange},model:{value:t.activeNames,callback:function(e){t.activeNames=e},expression:"activeNames"}},t._l(t.tempShopData,function(e,i){return a("el-collapse-item",{key:"shop_category"+i,attrs:{title:e.shop_category,name:i+1}},t._l(e.data_list,function(e,i){return a("div",{key:"data_list"+i,staticClass:"list"},[a("span",{staticClass:"shop_name"},[t._v(t._s(e.shop_name))]),t._v(" "),a("div",[a("el-button",{attrs:{round:"",type:"primary",size:"mini"},on:{click:function(a){t.talkPrice(e)}}},[t._v("议价")]),t._v(" "),a("el-button",{attrs:{round:"",type:"danger",size:"mini"},on:{click:function(a){t.buy_goods(e)}}},[t._v("立即采购")])],1)])}))})),t._v(" "),t.shopListData.length>4&&t.show?a("div",{staticClass:"more",on:{click:t.getMore}},[t._m(2)]):t._e(),t._v(" "),a("div",{staticStyle:{margin:"15px 0"}},[a("el-row",{attrs:{gutter:10}},[a("el-col",{attrs:{xs:24,sm:24,md:12,lg:12,xl:12}},[a("a",{attrs:{href:t.info.AD_data[2].link,target:"_blank"}},[a("img",{staticStyle:{width:"100%",height:"80px"},attrs:{src:t.info.AD_data[2].img_url,alt:""}})])]),t._v(" "),a("el-col",{attrs:{xs:24,sm:24,md:12,lg:12,xl:12}},[a("a",{attrs:{href:t.info.AD_data[3].link,target:"_blank"}},[a("img",{staticStyle:{width:"100%",height:"80px"},attrs:{src:t.info.AD_data[3].img_url,alt:""}})])])],1)],1),t._v(" "),t._m(3),t._v(" "),a("div",{staticStyle:{"background-color":"#f9f9f9","padding-bottom":"15px"}},[a("el-row",{attrs:{gutter:20}},t._l(t.newsListData,function(e,i){return a("el-col",{key:i,attrs:{xs:24,sm:24,md:12,lg:12,xl:12}},[a("div",{staticClass:"grid-content bg-purple"},[a("div",[a("h4",{staticStyle:{display:"inline-block"}},[t._v("  "+t._s(e.news_category)+" ")]),t._v(" "),a("span",{staticStyle:{float:"right","line-height":"60px",color:"#3a8ee6"},on:{click:t.pushMore}},[t._v("更多>>")])]),t._v(" "),t._l(e.data_list,function(e,i){return a("div",{key:"list"+i,staticClass:"news_wrap",on:{click:function(a){t.pushDetail(e.news_id)}}},[a("span",{staticClass:"newsTitle"},[t._v(t._s(e.news_title))]),t._v(" "),a("span",{staticClass:"newsDate"},[t._v(t._s(e.news_date))])])})],2)])}))],1),t._v(" "),a("el-dialog",{attrs:{visible:t.dialogFormVisible,title:"议价",width:"80%"},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[a("el-form",{ref:"talkPrice",staticClass:"demo-ruleForm",attrs:{model:t.talkPriceData,rules:t.rules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"意向价格",prop:"price"}},[a("el-input",{model:{value:t.talkPriceData.price,callback:function(e){t.$set(t.talkPriceData,"price",e)},expression:"talkPriceData.price"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"数量",prop:"count"}},[a("el-input",{model:{value:t.talkPriceData.count,callback:function(e){t.$set(t.talkPriceData,"count",e)},expression:"talkPriceData.count"}})],1)],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:t.cancelTalk}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.commitTalk("talkPrice")}}},[t._v("确 定")])],1)],1),t._v(" "),a("el-dialog",{attrs:{visible:t.dialogFormVisible1,title:"立即采购",width:"80%"},on:{"update:visible":function(e){t.dialogFormVisible1=e}}},[a("el-form",{ref:"buy",staticClass:"demo-ruleForm",attrs:{model:t.buyData,rules:t.rules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"产品名"}},[a("span",[t._v(t._s(t.buyData.goods_name))])]),t._v(" "),a("el-form-item",{attrs:{label:"单价"}},[a("span",[t._v(t._s(t.buyData.price))])]),t._v(" "),a("el-form-item",{attrs:{label:"采购量",prop:"total_num"}},[a("el-input",{on:{change:function(e){t.keydown()}},model:{value:t.buyData.total_num,callback:function(e){t.$set(t.buyData,"total_num",e)},expression:"buyData.total_num"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"总价"}},[a("span",{staticStyle:{"font-size":"18px",color:"red"}},[t._v(t._s(t.buyData.total_price))])]),t._v(" "),a("el-form-item",{attrs:{label:"收货地址",prop:"reciving_address"}},[a("el-input",{model:{value:t.buyData.reciving_address,callback:function(e){t.$set(t.buyData,"reciving_address",e)},expression:"buyData.reciving_address"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"物流方式"}},[a("el-radio-group",{model:{value:t.buyData.logistics_mode,callback:function(e){t.$set(t.buyData,"logistics_mode",e)},expression:"buyData.logistics_mode"}},[a("el-radio",{attrs:{label:0}},[t._v("到付")]),t._v(" "),a("el-radio",{attrs:{abel:1}},[t._v("寄付")])],1)],1),t._v(" "),a("el-form-item",{attrs:{label:"备注"}},[a("el-input",{attrs:{rows:2,type:"textarea",placeholder:"请输入内容"},model:{value:t.buyData.remark,callback:function(e){t.$set(t.buyData,"remark",e)},expression:"buyData.remark"}})],1)],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:t.cancelBuy}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.commitBuy("buy")}}},[t._v("确 定")])],1)],1)],1)},[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"menuTitle"},[e("span",{staticClass:"menuTitle_icon"}),this._v(" "),e("span",[this._v("价格趋势")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"menuTitle"},[e("span",{staticClass:"menuTitle_icon"}),this._v(" "),e("span",[this._v("在线采购")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("span",[this._v("更多"),e("i",{staticClass:"el-icon-arrow-down"})])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"menuTitle"},[e("span",{staticClass:"menuTitle_icon"}),this._v(" "),e("span",[this._v("新闻资讯")])])}],!1,null,null,null));m.options.__file="index.vue";e.default=m.exports},rPlz:function(t,e,a){}}]);