(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-3bdc"],{e5Uf:function(t,a,e){"use strict";var i=e("rPlz");e.n(i).a},fJVj:function(t,a,e){t.exports=e.p+"static/img/xuwei.0961cad.jpg"},lAbF:function(t,a,e){"use strict";e.r(a);var i=e("QbLZ"),s=e.n(i),r=e("TsPW"),o=e("ProS"),n=e.n(o),l=(e("75ce"),e("0o9m"),e("Ynxi"),e("AH3D"),n.a);e("OyzN"),e("EJiy");var c={mixins:[{mounted:function(){var t=this;this.__resizeHanlder=function(t,a,e){var i=void 0,s=void 0,r=void 0,o=void 0,n=void 0,l=function l(){var c=+new Date-o;c<a&&c>0?i=setTimeout(l,a-c):(i=null,e||(n=t.apply(r,s),i||(r=s=null)))};return function(){for(var s=arguments.length,c=Array(s),u=0;u<s;u++)c[u]=arguments[u];r=this,o=+new Date;var d=e&&!i;return i||(i=setTimeout(l,a)),d&&(n=t.apply(r,c),r=c=null),n}}(function(){t.chart&&t.chart.resize()},100),window.addEventListener("resize",this.__resizeHanlder)},beforeDestroy:function(){window.removeEventListener("resize",this.__resizeHanlder)}}],props:{className:{type:String,default:"chart"},id:{type:String,default:"chart"},width:{type:String,default:"200px"},height:{type:String,default:"200px"},charts_data:{type:Object,default:{}}},data:function(){return{chart:null,legend:[]}},mounted:function(){this.initChart(),this.__resizeHanlder()},beforeDestroy:function(){this.chart&&(this.chart.dispose(),this.chart=null)},methods:{initChart:function(){var t=this;this.chart=l.init(document.getElementById(this.id));var a={backgroundColor:"#f9f9f9",tooltip:{trigger:"axis",axisPointer:{type:"cross",label:{backgroundColor:"#6a7985"}}},legend:{top:20,icon:"rect",itemWidth:14,itemHeight:5,itemGap:13,data:this.legend},grid:{top:100,left:"2%",right:"4%",bottom:"2%",containLabel:!0},xAxis:[{type:"category",boundaryGap:!1,data:this.charts_data.x_axis}],yAxis:[{type:"value",name:"价格",axisTick:{show:!1},axisLine:{lineStyle:{color:"#57617B"}},axisLabel:{margin:10,textStyle:{fontSize:14}},splitLine:{lineStyle:{color:"#57617B"}}}],series:[]};this.charts_data.series.map(function(a,e){a.type="line",a.stack="总量"+e,t.legend.push(a.name)}),a.series=this.charts_data.series,this.chart.setOption(a)}}},u=e("KHd+"),d=Object(u.a)(c,function(){var t=this.$createElement;return(this._self._c||t)("div",{class:this.className,style:{height:this.height,width:this.width},attrs:{id:this.id}})},[],!1,null,null,null);d.options.__file="lineMarker.vue";var h=d.exports,m=e("L2JU"),_={name:"Dashboard",components:{Chart:h},data:function(){return{customer_id:sessionStorage.getItem("customer_id"),show:!0,dialogFormVisible:!1,dialogFormVisible1:!1,talkPriceData:{price:"",count:"",shop_id:"",customer_id:"",shop_name:"",packing:"",logistics_mode:0},buyData:{customer_id:"",goods_id:"",goods_name:"",price:"",total_price:0,total_num:"",reciving_address:"",logistics_mode:0,remark:""},activeNames:1,tabChartsData:[],shopListData:[],tempShopData:[],newsListData:[],rules:{price:[{required:!0,message:"请输入意向价格",trigger:"blur"},{pattern:/([1-9]\d*(\.\d*[1-9])?)|(0\.\d*[1-9])/,message:"只能输入大于0的数字",trigger:"blur"}],count:[{required:!0,message:"请输入数量",trigger:"change"},{pattern:/([1-9]\d*(\.\d*[1-9])?)|(0\.\d*[1-9])/,message:"只能输入大于0的数字",trigger:"blur"}],total_num:[{required:!0,message:"请输入数量",trigger:"change"},{pattern:/([1-9]\d*(\.\d*[1-9])?)|(0\.\d*[1-9])/,message:"只能输入大于0的数字",trigger:"blur"}],reciving_address:[{required:!0,message:"请输入地址",trigger:"change"}]}}},computed:s()({},Object(m.b)(["info"])),created:function(){this.getTabchartsList(),this.getShopListData(),this.getNewsListData()},methods:{getTabchartsList:function(){var t=this;Object(r.i)().then(function(a){console.log("getTabcharts",a),a.data&&(t.tabChartsData=a.data)})},getShopListData:function(){var t=this;Object(r.h)().then(function(a){console.log("getShopList",a),a.data&&(t.shopListData=a.data,t.tempShopData=a.data.slice(0,4))})},getNewsListData:function(){var t=this;Object(r.e)().then(function(a){console.log("getNewsList",a),a.data&&(t.newsListData=a.data)})},talkPrice:function(t){var a=this;Object(r.j)().then(function(e){"0000"===e.code?(a.dialogFormVisible=!0,a.talkPriceData.customer_id=e.data.customer_id,a.talkPriceData.shop_id=t.shop_id,a.talkPriceData.shop_name=t.shop_name):"0002"===e.code&&(a.$message.error(e.msg),setTimeout(function(){a.pushLogin()},1500))})},commitTalk:function(t){var a=this;this.$refs[t].validate(function(t){if(!t)return!1;Object(r.b)(a.talkPriceData).then(function(t){console.log("bargaining",t),"0000"===t.code?(a.$message({message:t.msg?t.msg:"您的议价请求已发送给工作人员，工作人员将尽快与您联系！",type:"success"}),a.dialogFormVisible=!1):a.$message({message:t.msg?t.msg:"议价失败",type:"error"})}).catch(function(){a.$message.error("议价失败"),a.dialogFormVisible=!1})})},cancelTalk:function(){this.dialogFormVisible=!1,this.restTalkPriceData()},restTalkPriceData:function(){this.talkPriceData={price:"",count:"",shop_id:"",customer_id:"",shop_name:"",packing:"",logistics_mode:0}},buy_goods:function(t){var a=this;Object(r.j)().then(function(e){"0000"===e.code?(a.buyData.customer_id=e.data.customer_id,a.buyData.goods_id=t.shop_id,a.buyData.goods_name=t.shop_name,a.buyData.price=t.price,a.dialogFormVisible1=!0):"0002"===e.code&&(a.$message.error(e.msg),setTimeout(function(){a.pushLogin()},1500))})},cancelBuy:function(){this.dialogFormVisible1=!1,this.restBuyData()},commitBuy:function(t){var a=this;this.$refs[t].validate(function(t){if(!t)return!1;1!==a.buyData.logistics_mode||(console.log("this.buyData.total_num % 32",a.buyData.total_num%32),a.buyData.total_num%32==0)?a.$confirm("该价格为不含运费价格，工作人员会尽快与您联系洽商运费事宜","提示",{confirmButtonText:"继续下单",cancelButtonText:"取消",type:"warning"}).then(function(){Object(r.c)(a.buyData).then(function(t){console.log("buyData",t),"0000"===t.code?(a.$message({message:t.msg?t.msg:"您的采购请求已发送给工作人员，工作人员将尽快与您联系！",type:"success"}),a.dialogFormVisible1=!1):a.$message({message:t.msg?t.msg:"采购失败",type:"error"})}).catch(function(){a.$message.error("采购失败"),a.dialogFormVisible1=!1})}).catch(function(){}):a.$message({message:"寄付只支持32吨/车，请输入32的整数倍采购量",type:"warning"})})},restBuyData:function(){this.buyData={customer_id:"",goods_id:"",goods_name:"",price:"",total_price:0,total_num:"",reciving_address:"",logistics_mode:0,remark:""}},keydown:function(){this.buyData.total_price=Math.floor(this.buyData.total_num*this.buyData.price*100)/100},getMore:function(){this.show=!1,this.tempShopData=this.shopListData},pushMore:function(t){console.log("id",t),this.$router.push("/newsMore/index/"+t)},pushDetail:function(t){this.$router.push("/newsDetail/index/"+t)},handleClick:function(t,a){this.$refs["charts"+t.index][0].__resizeHanlder()},handleChange:function(t){},pushLogin:function(){window.open("http://customer.mtsh.cn/toLogin?callbackUrl=http://www.mengtan.com.cn","_self")}}},g=(e("e5Uf"),Object(u.a)(_,function(){var t=this,a=t.$createElement,i=t._self._c||a;return i("div",{staticClass:"dashboard-container"},[t._m(0),t._v(" "),i("el-tabs",{staticClass:"tabs",attrs:{type:"card"},on:{"tab-click":t.handleClick}},t._l(t.tabChartsData,function(t,a){return i("el-tab-pane",{key:a,attrs:{label:t.title}},[i("div",{staticClass:"chart-container"},[i("chart",{ref:"charts"+a,refInFor:!0,attrs:{id:"wrap"+a,charts_data:t.charts_data,height:"100%",width:"100%"}})],1)])})),t._v(" "),i("div",{staticStyle:{margin:"15px 0"}},[i("el-row",{attrs:{gutter:10}},[i("el-col",{attrs:{xs:24,sm:24,md:12,lg:12,xl:12}},[t.info.AD_data[0]?i("a",{staticClass:"ad_wrap",attrs:{href:t.info.AD_data[0].link,target:"_blank"}},[i("img",{staticStyle:{width:"100%",height:"80px"},attrs:{src:t.info.AD_data[0].img_url,alt:"广告"}})]):i("img",{staticStyle:{width:"100%",height:"80px"},attrs:{src:e("fJVj"),alt:""}})]),t._v(" "),i("el-col",{attrs:{xs:24,sm:24,md:12,lg:12,xl:12}},[t.info.AD_data[1]?i("a",{staticClass:"ad_wrap",attrs:{href:t.info.AD_data[1].link,target:"_blank"}},[i("img",{staticStyle:{width:"100%",height:"80px"},attrs:{src:t.info.AD_data[1].img_url,alt:"广告"}})]):i("img",{staticStyle:{width:"100%",height:"80px"},attrs:{src:e("fJVj"),alt:""}})])],1)],1),t._v(" "),t._m(1),t._v(" "),i("el-collapse",{attrs:{accordion:""},on:{change:t.handleChange},model:{value:t.activeNames,callback:function(a){t.activeNames=a},expression:"activeNames"}},t._l(t.tempShopData,function(a,e){return i("el-collapse-item",{key:"shop_category"+e,attrs:{title:a.shop_category,name:e+1}},t._l(a.data_list,function(a,e){return i("div",{key:"data_list"+e,staticClass:"list"},[i("span",{staticClass:"shop_name shop_name_child1"},[i("i",[t._v("产品:")]),t._v(" "+t._s(a.shop_name))]),t._v(" "),i("span",{staticClass:"shop_name shop_name_child2"},[i("i",[t._v("规格:")]),t._v(" "+t._s(a.standard))]),t._v(" "),i("span",{staticClass:"shop_name shop_name_child3"},[i("i",[t._v("价格:")]),t._v(" "+t._s(a.price))]),t._v(" "),i("div",[i("el-button",{attrs:{round:"",type:"danger",size:"mini"},on:{click:function(e){t.buy_goods(a)}}},[t._v("立即采购")])],1)])}))})),t._v(" "),t.shopListData.length>4&&t.show?i("div",{staticClass:"more",on:{click:t.getMore}},[t._m(2)]):t._e(),t._v(" "),i("div",{staticStyle:{margin:"15px 0"}},[i("el-row",{attrs:{gutter:10}},[i("el-col",{attrs:{xs:24,sm:24,md:12,lg:12,xl:12}},[t.info.AD_data[2]?i("a",{staticClass:"ad_wrap",attrs:{href:t.info.AD_data[2].link,target:"_blank"}},[i("img",{staticStyle:{width:"100%",height:"80px"},attrs:{src:t.info.AD_data[2].img_url,alt:"广告"}})]):i("img",{staticStyle:{width:"100%",height:"80px"},attrs:{src:e("fJVj"),alt:""}})]),t._v(" "),i("el-col",{attrs:{xs:24,sm:24,md:12,lg:12,xl:12}},[t.info.AD_data[3]?i("a",{staticClass:"ad_wrap",attrs:{href:t.info.AD_data[3].link,target:"_blank"}},[i("img",{staticStyle:{width:"100%",height:"80px"},attrs:{src:t.info.AD_data[3].img_url,alt:"广告"}})]):i("img",{staticStyle:{width:"100%",height:"80px"},attrs:{src:e("fJVj"),alt:""}})])],1)],1),t._v(" "),t._m(3),t._v(" "),i("div",{staticStyle:{"background-color":"#f9f9f9","padding-bottom":"15px"}},[i("el-row",{attrs:{gutter:20}},t._l(t.newsListData.slice(0,4),function(a,e){return i("el-col",{key:e,attrs:{xs:24,sm:24,md:12,lg:12,xl:12}},[i("div",{staticClass:"grid-content bg-purple"},[i("div",[i("h4",{staticStyle:{display:"inline-block"}},[t._v("  "+t._s(a.news_category)+" ")]),t._v(" "),i("span",{staticStyle:{float:"right","line-height":"60px",color:"#3a8ee6",cursor:"pointer"},on:{click:function(e){t.pushMore(a.news_category_id)}}},[t._v("更多>>")])]),t._v(" "),i("div",{staticClass:"news_height"},t._l(a.data_list.slice(0,8),function(a,e){return i("div",{key:"list"+e,staticClass:"news_wrap",on:{click:function(e){t.pushDetail(a.news_id)}}},[i("span",{staticClass:"newsTitle"},[t._v(t._s(a.news_title.length>20?a.news_title.substring(0,20)+"...":a.news_title))]),t._v(" "),i("span",{staticClass:"newsDate"},[t._v(t._s(a.news_date))])])}))])])}))],1),t._v(" "),i("el-dialog",{attrs:{visible:t.dialogFormVisible,title:"议价",width:"80%"},on:{"update:visible":function(a){t.dialogFormVisible=a}}},[i("el-form",{ref:"talkPrice",staticClass:"demo-ruleForm",attrs:{model:t.talkPriceData,rules:t.rules,"label-width":"100px"}},[i("el-form-item",{attrs:{label:"意向价格",prop:"price"}},[i("el-input",{model:{value:t.talkPriceData.price,callback:function(a){t.$set(t.talkPriceData,"price",a)},expression:"talkPriceData.price"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"数量",prop:"count"}},[i("el-input",{model:{value:t.talkPriceData.count,callback:function(a){t.$set(t.talkPriceData,"count",a)},expression:"talkPriceData.count"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"包装",prop:"packing"}},[i("el-input",{model:{value:t.talkPriceData.packing,callback:function(a){t.$set(t.talkPriceData,"packing",a)},expression:"talkPriceData.packing"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"物流方式"}},[i("el-radio-group",{model:{value:t.talkPriceData.logistics_mode,callback:function(a){t.$set(t.talkPriceData,"logistics_mode",a)},expression:"talkPriceData.logistics_mode"}},[i("el-radio",{attrs:{label:0}},[t._v("自提")]),t._v(" "),i("el-radio",{attrs:{label:1}},[t._v("送到")])],1)],1)],1),t._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:t.cancelTalk}},[t._v("取 消")]),t._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:function(a){t.commitTalk("talkPrice")}}},[t._v("确 定")])],1)],1),t._v(" "),i("el-dialog",{attrs:{visible:t.dialogFormVisible1,title:"立即采购",width:"80%"},on:{"update:visible":function(a){t.dialogFormVisible1=a}}},[i("el-form",{ref:"buy",staticClass:"demo-ruleForm",attrs:{model:t.buyData,rules:t.rules,"label-width":"100px"}},[i("el-form-item",{attrs:{label:"产品名"}},[i("span",[t._v(t._s(t.buyData.goods_name))])]),t._v(" "),i("el-form-item",{attrs:{label:"单价"}},[i("span",[t._v(t._s(t.buyData.price))])]),t._v(" "),i("el-form-item",{attrs:{label:"采购量",prop:"total_num"}},[i("el-input",{on:{change:function(a){t.keydown()}},model:{value:t.buyData.total_num,callback:function(a){t.$set(t.buyData,"total_num",a)},expression:"buyData.total_num"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"总价"}},[i("span",{staticStyle:{"font-size":"18px",color:"red"}},[t._v(t._s(t.buyData.total_price))])]),t._v(" "),i("el-form-item",{attrs:{label:"收货地址",prop:"reciving_address"}},[i("el-input",{model:{value:t.buyData.reciving_address,callback:function(a){t.$set(t.buyData,"reciving_address",a)},expression:"buyData.reciving_address"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"物流方式"}},[i("el-radio-group",{model:{value:t.buyData.logistics_mode,callback:function(a){t.$set(t.buyData,"logistics_mode",a)},expression:"buyData.logistics_mode"}},[i("el-radio",{attrs:{label:0}},[t._v("自提")]),t._v(" "),i("el-radio",{attrs:{label:1}},[t._v("送到")])],1)],1),t._v(" "),i("el-form-item",{attrs:{label:"备注"}},[i("el-input",{attrs:{rows:2,type:"textarea",placeholder:"请输入内容"},model:{value:t.buyData.remark,callback:function(a){t.$set(t.buyData,"remark",a)},expression:"buyData.remark"}})],1)],1),t._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:t.cancelBuy}},[t._v("取 消")]),t._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:function(a){t.commitBuy("buy")}}},[t._v("确 定")])],1)],1)],1)},[function(){var t=this.$createElement,a=this._self._c||t;return a("div",{staticClass:"menuTitle"},[a("span",{staticClass:"menuTitle_icon"}),this._v(" "),a("span",[this._v("价格趋势")])])},function(){var t=this.$createElement,a=this._self._c||t;return a("div",{staticClass:"menuTitle"},[a("span",{staticClass:"menuTitle_icon"}),this._v(" "),a("span",[this._v("在线采购")])])},function(){var t=this.$createElement,a=this._self._c||t;return a("span",[this._v("更多"),a("i",{staticClass:"el-icon-arrow-down"})])},function(){var t=this.$createElement,a=this._self._c||t;return a("div",{staticClass:"menuTitle"},[a("span",{staticClass:"menuTitle_icon"}),this._v(" "),a("span",[this._v("新闻资讯")])])}],!1,null,null,null));g.options.__file="index.vue";a.default=g.exports},rPlz:function(t,a,e){}}]);